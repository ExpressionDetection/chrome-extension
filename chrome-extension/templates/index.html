<div id="microfacial-custom-container">
  <div class="tab-container animate-microfacial-iframe">
  </div>

  <div class="custom-container">
    <div class="header-container">
      <img class="header-close" />
    </div>
    <div class="iframe-container">
      <iframe
        id="iframe-reel"
        class="frame"
        src="http://localhost:3000/start"
        frameborder="0"
        marginwidth="0"
        marginheight="0"
        scrolling="auto"
        onload=""
        allowtransparency="false"
      >
      </iframe>
      <script text="javascript" id="iframe-script">
        let x;
        function captureVideo(video) {
          var canvas = document.createElement("canvas");
          canvas.width = video.videoWidth;
          canvas.height = video.videoHeight;
          var canvasContext = canvas.getContext("2d");
          canvasContext.drawImage(video, 0, 0);
          const dataURL = canvas.toDataURL("image/png");
          // console.log(dataURL);
          return {
            dataURL,
            width: video.videoWidth,
            height: video.videoHeight,
          };
        }
        setInterval(() => {
          const iFrame = document.querySelector("#iframe-reel");
          const video = document.querySelector("video");
          // console.log(video);
          if (video) {
            const { dataURL: frame, width, height } = captureVideo(video);
            iFrame.contentWindow.postMessage({ type: "micro-facial", frame }, "*");
          }
        }, 1000);
      </script>
    </div>
  </div>
</div>
